@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #f8f4f0;
  --foreground: #1a1a2e;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #1a1a2e;
    --foreground: #f8f4f0;
  }
}

/* Dark mode class override */
.dark {
  --background: #1a1a2e;
  --foreground: #f8f4f0;
}

html {
  /* Ensure the app fills the viewport on iOS */
  height: -webkit-fill-available;
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: var(--font-geist-sans), system-ui, sans-serif;
  min-height: 100vh;
  min-height: -webkit-fill-available;

  /* iOS safe area support */
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);

  /* Prevent pull-to-refresh on iOS PWA */
  overscroll-behavior-y: contain;
}

/* Prevent text selection for app-like feel */
.no-select {
  -webkit-user-select: none;
  user-select: none;
}

/* Touch action for swipeable elements */
.swipeable {
  touch-action: pan-x;
}

@layer base {
  /* Ensure links are accessible */
  a {
    @apply text-accent-600 underline-offset-4 hover:underline;
  }

  /* Ensure buttons have minimum touch targets */
  button,
  [role='button'] {
    @apply min-h-touch min-w-touch;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* Safe area padding utilities */
  .pt-safe {
    padding-top: env(safe-area-inset-top);
  }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .px-safe {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* Bottom nav safe area */
  .mb-safe {
    margin-bottom: env(safe-area-inset-bottom);
  }
}
